{% extends 'base.html' %}
{% load static %}

{% block title %}Advanced Filtering{% endblock title %}

{% block css_files %}
  <link rel="stylesheet" href="{% static 'haji_salam/css/advanced-filtering.css' %}">
{% endblock css_files %}

{% block home_nav_link %}
  <a href="{% url 'home-page' %}" class="nav-link ms-5">Home</a>
{% endblock home_nav_link %}
{% block properties_nav_link %}
  <a href="{% url 'all-properties-page' %}" class="nav-link ms-5">Properties</a>
{% endblock properties_nav_link %}
{% block about_nav_link %}
  <a href="#" class="nav-link ms-5">About Us</a>
{% endblock about_nav_link %}
{% block contact_nav_link %}
  <a href="#" class="nav-link ms-5">Contact Us</a>
{% endblock contact_nav_link %}

{% block banner %}
  <div class="overlay-img" style="background-image: url({% static 'haji_salam/images/home-img.jpeg' %})"></div>
  <div class="col-md-10 col-lg-7 d-flex flex-column align-items-center justify-content-center">
    <h1 style="font-size: 40px;">ADVANCED SEARCH</h1>
    <p style="font-size: 20px;">Home > Search</p>
  </div>
{% endblock banner %}

{% block content %}
  <div class="container">
    <h3 class="mb-4 text-nowrap text-center">Filter Your Desired Property</h3>
    <form method="POST" action="{% url 'filtered-properties' %}" class="w-100">
      {% csrf_token %}
      <div class="row search-filter-container d-flex">

        <!-- Purpose -->
        <div class="col-6 col-lg-3 dropdown">
          <div class="mt-0 position-absolute label">Purpose of Property:</div>
          <button class="dropdown-toggle purpose-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">--------</button>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item purpose-dropdown-item" href="" purposeValue="">--------</a></li>
            {% for purpose in purpose_choices %}
              <li><a class="dropdown-item purpose-dropdown-item" href="" purposeValue="{{ purpose.0 }}">{{ purpose.1 }}</a></li>
            {% endfor %}
          </ul>
        </div>
        <input type="hidden" name="purpose" class="purpose-field">

        <!-- City -->
        <div class="col-6 col-lg-3 dropdown">
          <div class="mt-0 position-absolute label">City:</div>
          <button class="dropdown-toggle city-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">--------</button>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item city-dropdown-item" href="" cityValue="">--------</a></li>
            {% for city in city_choices %}
              <li><a class="dropdown-item city-dropdown-item" href="" cityValue="{{ city.0 }}">{{ city.1 }}</a></li>
            {% endfor %}
          </ul>
        </div>
        <input type="hidden" name="city" class="city-field">

        <!-- Region -->
        <div class="col-6 col-lg-3 dropdown">
          <div class="mt-0 position-absolute label">Region (Neighborhood):</div>
          <button class="dropdown-toggle region-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">--------</button>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item region-dropdown-item" href="" regionValue="">--------</a></li>
            {% for region in regions_choices %}
              <li><a class="dropdown-item region-dropdown-item" href="" regionValue="{{ region.0 }}">{{ region.1 }}</a></li>
            {% endfor %}
          </ul>
        </div>
        <input type="hidden" name="region" class="region-field">

        <!-- Project -->
        <div class="col-6 col-lg-3 dropdown">
          <div class="mt-0 position-absolute label">Project:</div>
          <button class="dropdown-toggle project-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">--------</button>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item project-dropdown-item" href="" projectValue="">--------</a></li>
            {% for project in project_choices %}
              <li><a class="dropdown-item project-dropdown-item" href="" projectValue="{{ project.0 }}">{{ project.1 }}</a></li>
            {% endfor %}
          </ul>
        </div>
        <input type="hidden" name="project" class="project-field">

        <!-- Type -->
        <div class="col-6 col-lg-3 dropdown">
          <div class="mt-0 position-absolute label">Property Type:</div>
          <button class="dropdown-toggle type-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">--------</button>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item type-dropdown-item" href="" typeValue="">--------</a></li>
            {% for type in type_choices %}
              <li><a class="dropdown-item type-dropdown-item" href="" typeValue="{{ type.0 }}">{{ type.1 }}</a></li>
            {% endfor %}
          </ul>
        </div>
        <input type="hidden" name="type" class="type-field">

        <!-- Numeric Inputs -->
        {% comment %} Corrected spelling of "Area" {% endcomment %}
        <div class="col-6 col-lg-3 field-container">
          <label class="label">Min Area (m²):</label>
          <input name="min-area" type="number" placeholder="Min Area" class="form-control">
        </div>

        <div class="col-6 col-lg-3 field-container">
          <label class="label">Max Area (m²):</label>
          <input name="max-area" type="number" placeholder="Max Area" class="form-control">
        </div>

        <div class="col-6 col-lg-3 field-container">
          <label class="label">Min Price ($):</label>
          <input name="min-price" type="number" placeholder="Min Price" class="form-control">
        </div>

        <div class="col-6 col-lg-3 field-container">
          <label class="label">Max Price ($):</label>
          <input name="max-price" type="number" placeholder="Max Price" class="form-control">
        </div>

        <div class="col-6 col-lg-3 field-container">
          <label class="label">Reception Rooms:</label>
          <input name="reception-rooms" type="number" placeholder="Reception Rooms" class="form-control">
        </div>

        <div class="col-6 col-lg-3 field-container">
          <label class="label">Bedrooms:</label>
          <input name="bedrooms" type="number" placeholder="Bedrooms" class="form-control">
        </div>

        <div class="col-6 col-lg-3 field-container">
          <label class="label">Bathrooms:</label>
          <input name="bathrooms" type="number" placeholder="Bathrooms" class="form-control">
        </div>

        <div class="col-6 col-lg-3 field-container">
          <label class="label">Kitchens:</label>
          <input name="kitchens" type="number" placeholder="Kitchens" class="form-control">
        </div>

        <div class="col-6 col-lg-3 field-container">
          <label class="label">Garage:</label>
          <input name="garage" type="number" placeholder="Garage" class="form-control">
        </div>

        <div class="col-6 col-lg-3 field-container">
          <label class="label">Balcony:</label>
          <input name="balcony" type="number" placeholder="Balcony" class="form-control">
        </div>

        <!-- Submit -->
        <input type="hidden" name="get-path" value="{{ request.path }}">
        <div class="col-12 mt-4 text-center">
          <button type="submit" class="search-filter-btn">Search</button>
        </div>

      </div>
    </form>
  </div>

  <script src="{% static 'haji_salam/js/live-search.js' %}"></script>
  <script src="{% static 'haji_salam/js/search-filter.js' %}"></script>
{% endblock content %}
